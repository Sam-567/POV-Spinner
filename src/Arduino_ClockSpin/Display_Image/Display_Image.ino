
#include <Adafruit_NeoPixel.h>

unsigned long totalTime = 0;
unsigned long average;
unsigned long currentTime = 0;

int standard = 530;
int tolerance = 12;
int readPin = A0;

#define PIN 6
#define TRUEPIXELS 28
#define NUMPIXELS 14

const  byte PROGMEM image[][120][NUMPIXELS] = 
{ { {16, 23, 51, 52, 63, 75, 93, 131, 167, 188, 198, 202, 250, 255},
  {16, 27, 33, 39, 82, 90, 99, 117, 128, 166, 191, 208, 227, 243},
  {7, 32, 50, 60, 78, 89, 110, 133, 167, 192, 195, 216, 228, 244},
  {6, 32, 33, 36, 80, 90, 104, 110, 114, 135, 136, 139, 175, 227},
  {0, 13, 15, 28, 57, 70, 111, 112, 134, 192, 200, 216, 230, 244},
  {7, 14, 22, 36, 51, 117, 132, 137, 146, 158, 162, 189, 195, 255},
  {33, 47, 82, 99, 101, 108, 116, 157, 161, 169, 179, 187, 210, 220},
  {12, 14, 37, 53, 59, 77, 92, 93, 104, 154, 166, 224, 235, 237},
  {32, 42, 50, 56, 84, 90, 94, 149, 174, 176, 178, 187, 215, 248},
  {19, 22, 52, 58, 95, 109, 121, 157, 187, 198, 207, 222, 227, 238},
  {2, 25, 62, 120, 134, 135, 170, 186, 216, 220, 225, 240, 243, 253},
  {8, 42, 56, 59, 71, 127, 130, 139, 145, 149, 167, 207, 209, 220},
  {3, 25, 27, 28, 29, 82, 111, 116, 132, 156, 168, 172, 209, 228},
  {0, 27, 44, 46, 68, 102, 120, 131, 139, 142, 171, 172, 194, 196},
  {14, 72, 77, 79, 120, 121, 126, 131, 140, 172, 225, 227, 240, 245},
  {2, 25, 38, 63, 71, 102, 129, 150, 187, 188, 204, 235, 237, 250},
  {12, 63, 69, 92, 109, 111, 148, 157, 177, 191, 201, 203, 208, 227},
  {7, 15, 56, 89, 102, 103, 109, 147, 160, 172, 212, 236, 241, 245},
  {11, 34, 42, 52, 57, 72, 144, 150, 154, 157, 167, 224, 228, 249},
  {19, 44, 62, 65, 71, 82, 102, 106, 110, 127, 167, 178, 180, 196},
  {5, 8, 15, 39, 45, 62, 113, 125, 147, 158, 172, 193, 217, 237},
  {21, 60, 105, 107, 117, 135, 136, 138, 151, 163, 165, 170, 201, 230},
  {19, 30, 37, 76, 86, 106, 123, 127, 133, 134, 151, 194, 199, 223},
  {10, 16, 45, 93, 94, 100, 112, 124, 155, 163, 165, 179, 182, 230},
  {36, 48, 60, 108, 156, 162, 168, 169, 172, 177, 210, 220, 225, 237},
  {27, 43, 60, 95, 96, 104, 106, 186, 189, 196, 240, 241, 245, 255},
  {14, 56, 66, 78, 82, 96, 100, 132, 140, 143, 152, 176, 193, 252},
  {8, 36, 39, 40, 66, 76, 84, 93, 97, 106, 138, 141, 169, 235},
  {2, 30, 70, 84, 113, 120, 141, 151, 153, 159, 161, 197, 212, 218},
  {36, 50, 69, 74, 89, 96, 108, 109, 125, 168, 185, 233, 249, 251},
  {8, 12, 79, 81, 98, 105, 127, 133, 144, 182, 193, 198, 210, 244},
  {21, 43, 49, 68, 87, 127, 138, 158, 163, 165, 169, 215, 221, 251},
  {6, 22, 54, 70, 101, 111, 119, 168, 177, 214, 217, 227, 232, 234},
  {4, 13, 16, 24, 26, 32, 57, 90, 122, 126, 146, 220, 236, 237},
  {33, 39, 73, 74, 88, 109, 118, 192, 194, 208, 226, 236, 250, 252},
  {8, 20, 32, 58, 74, 83, 91, 97, 151, 159, 186, 241, 242, 254},
  {6, 22, 44, 45, 69, 82, 101, 107, 110, 111, 146, 195, 240, 254},
  {12, 27, 47, 48, 68, 83, 112, 128, 171, 204, 208, 222, 233, 248},
  {9, 58, 65, 84, 87, 105, 119, 125, 177, 184, 199, 214, 226, 254},
  {10, 11, 31, 45, 73, 81, 88, 102, 107, 184, 192, 216, 217, 236},
  {18, 52, 62, 63, 84, 154, 167, 208, 220, 230, 235, 236, 240, 246},
  {0, 1, 14, 47, 48, 74, 135, 170, 211, 222, 223, 234, 242, 249},
  {55, 74, 86, 103, 115, 143, 157, 168, 180, 181, 191, 197, 238, 254},
  {20, 34, 73, 75, 120, 127, 140, 157, 164, 173, 205, 235, 244, 245},
  {8, 16, 18, 24, 62, 67, 70, 78, 101, 109, 160, 162, 170, 251},
  {43, 73, 133, 136, 137, 149, 151, 155, 171, 172, 214, 221, 223, 243},
  {8, 38, 54, 64, 84, 95, 121, 162, 163, 166, 195, 196, 205, 225},
  {7, 12, 13, 17, 54, 86, 112, 145, 150, 174, 188, 198, 226, 252},
  {4, 27, 40, 41, 62, 101, 119, 159, 165, 173, 182, 186, 193, 245},
  {15, 20, 23, 49, 71, 99, 135, 153, 180, 182, 193, 218, 221, 225},
  {8, 14, 29, 30, 72, 85, 117, 180, 183, 188, 222, 227, 238, 240},
  {8, 31, 38, 43, 85, 98, 114, 126, 160, 191, 210, 212, 228, 231},
  {6, 17, 21, 53, 70, 81, 90, 132, 133, 188, 207, 229, 230, 252},
  {35, 57, 62, 80, 118, 126, 164, 192, 198, 225, 226, 230, 231, 245},
  {75, 86, 119, 128, 144, 158, 161, 169, 188, 208, 228, 232, 233, 242},
  {0, 35, 75, 86, 87, 91, 112, 163, 203, 215, 221, 227, 229, 234},
  {5, 28, 68, 70, 95, 102, 108, 111, 126, 138, 145, 202, 217, 223},
  {10, 17, 28, 46, 50, 59, 73, 83, 102, 103, 146, 174, 200, 236},
  {15, 24, 32, 41, 43, 55, 56, 106, 129, 132, 190, 210, 217, 253},
  {4, 32, 43, 44, 56, 68, 81, 94, 123, 146, 193, 226, 237, 238},
  {70, 78, 82, 87, 114, 119, 149, 151, 193, 209, 217, 218, 249, 252},
  {3, 25, 39, 43, 101, 105, 113, 134, 151, 156, 175, 176, 177, 216},
  {20, 27, 119, 123, 147, 149, 157, 161, 209, 215, 222, 224, 232, 251},
  {0, 13, 54, 79, 81, 98, 114, 154, 175, 209, 232, 241, 249, 254},
  {1, 3, 6, 15, 34, 38, 45, 74, 98, 120, 197, 199, 224, 248},
  {3, 14, 51, 74, 83, 89, 111, 143, 177, 183, 202, 225, 240, 254},
  {7, 11, 21, 32, 52, 74, 95, 110, 143, 159, 175, 189, 193, 236},
  {7, 38, 55, 59, 61, 108, 112, 115, 120, 181, 194, 201, 211, 222},
  {8, 10, 19, 20, 57, 73, 108, 122, 147, 163, 173, 202, 212, 236},
  {1, 6, 9, 34, 45, 54, 64, 94, 98, 107, 128, 219, 235, 247},
  {1, 4, 17, 33, 44, 55, 61, 85, 97, 170, 180, 207, 212, 224},
  {31, 33, 114, 118, 130, 133, 153, 154, 193, 204, 221, 223, 230, 251},
  {41, 95, 104, 118, 149, 152, 157, 162, 190, 198, 211, 219, 231, 249},
  {5, 22, 43, 98, 108, 123, 136, 178, 198, 199, 210, 216, 225, 251},
  {6, 36, 50, 87, 107, 110, 111, 157, 168, 171, 188, 193, 195, 218},
  {10, 11, 22, 31, 36, 73, 96, 112, 127, 134, 195, 233, 236, 243},
  {7, 17, 22, 47, 63, 68, 82, 110, 175, 185, 186, 187, 208, 220},
  {7, 26, 41, 65, 67, 87, 115, 127, 138, 164, 194, 209, 211, 255},
  {6, 29, 32, 51, 58, 79, 116, 120, 151, 155, 163, 215, 234, 254},
  {20, 30, 44, 59, 120, 145, 146, 148, 165, 167, 169, 195, 222, 228},
  {1, 12, 14, 42, 51, 63, 89, 132, 143, 166, 177, 181, 222, 238},
  {20, 30, 34, 41, 56, 82, 96, 114, 131, 134, 143, 223, 227, 230},
  {6, 20, 59, 91, 111, 114, 149, 168, 200, 215, 218, 231, 240, 251},
  {3, 26, 100, 119, 123, 138, 141, 150, 159, 186, 197, 210, 211, 255},
  {0, 25, 41, 58, 64, 83, 151, 156, 172, 176, 207, 211, 220, 234},
  {12, 40, 45, 55, 60, 63, 93, 106, 107, 124, 132, 183, 192, 199},
  {14, 16, 86, 110, 131, 141, 149, 157, 182, 198, 200, 212, 245, 248},
  {8, 10, 11, 20, 25, 80, 81, 96, 121, 138, 146, 175, 200, 221},
  {20, 73, 110, 123, 141, 166, 170, 173, 187, 190, 191, 203, 205, 248},
  {10, 28, 29, 43, 51, 55, 122, 126, 152, 155, 158, 171, 176, 220},
  {16, 24, 30, 41, 45, 65, 69, 85, 125, 133, 138, 145, 161, 191},
  {2, 5, 6, 25, 39, 82, 87, 125, 135, 141, 190, 191, 210, 232},
  {23, 24, 25, 28, 50, 73, 76, 88, 102, 121, 194, 200, 203, 254},
  {5, 25, 59, 64, 118, 155, 157, 164, 204, 206, 213, 222, 235, 253},
  {10, 11, 17, 35, 57, 73, 99, 106, 128, 137, 171, 218, 227, 255},
  {21, 26, 39, 57, 60, 62, 98, 113, 173, 197, 222, 236, 250, 253},
  {31, 42, 47, 56, 65, 68, 70, 71, 86, 142, 160, 173, 213, 250},
  {47, 50, 86, 95, 114, 173, 176, 197, 206, 216, 221, 223, 235, 236},
  {15, 31, 52, 59, 93, 101, 133, 139, 154, 173, 177, 189, 193, 204},
  {11, 22, 26, 36, 53, 67, 117, 134, 174, 187, 198, 206, 209, 226},
  {13, 37, 69, 94, 123, 134, 150, 161, 188, 194, 203, 222, 228, 231},
  {1, 2, 43, 63, 83, 113, 118, 132, 135, 164, 169, 211, 225, 245},
  {10, 63, 66, 72, 76, 79, 90, 104, 116, 129, 155, 156, 168, 245},
  {9, 29, 55, 74, 82, 98, 106, 116, 118, 172, 210, 224, 228, 241},
  {68, 78, 101, 133, 147, 154, 161, 176, 179, 192, 202, 205, 221, 240},
  {2, 14, 38, 41, 53, 81, 100, 124, 137, 165, 166, 183, 207, 246},
  {16, 19, 62, 90, 93, 97, 115, 122, 140, 192, 193, 211, 223, 227},
  {1, 12, 47, 49, 105, 114, 118, 132, 152, 161, 169, 219, 249, 254},
  {9, 12, 35, 53, 64, 95, 117, 123, 132, 134, 139, 141, 184, 233},
  {6, 10, 18, 39, 62, 79, 161, 162, 164, 177, 183, 220, 225, 229},
  {12, 27, 39, 46, 68, 73, 77, 80, 124, 128, 148, 196, 198, 208},
  {49, 50, 64, 82, 114, 151, 177, 178, 189, 205, 222, 237, 244, 252},
  {14, 20, 27, 50, 83, 98, 100, 103, 145, 182, 183, 195, 213, 218},
  {2, 18, 32, 72, 86, 103, 114, 132, 151, 164, 188, 200, 203, 234},
  {1, 35, 39, 65, 66, 100, 101, 111, 118, 133, 171, 218, 226, 241},
  {11, 67, 72, 81, 107, 112, 121, 132, 141, 143, 211, 214, 242, 255},
  {38, 56, 65, 75, 76, 93, 116, 123, 130, 131, 138, 170, 176, 224},
  {35, 47, 54, 56, 74, 79, 125, 134, 141, 192, 197, 225, 239, 247},
  {0, 26, 41, 42, 53, 73, 81, 110, 140, 148, 198, 201, 210, 220},
  {2, 21, 23, 37, 97, 105, 135, 148, 151, 176, 208, 217, 219, 246} }, 
{ {16, 23, 51, 52, 63, 75, 93, 131, 167, 188, 198, 202, 250, 255},
  {16, 27, 33, 39, 82, 90, 99, 117, 128, 166, 191, 208, 227, 243},
  {7, 32, 50, 60, 78, 89, 110, 133, 167, 192, 195, 216, 228, 244},
  {6, 32, 33, 36, 80, 90, 104, 110, 114, 135, 136, 139, 175, 227},
  {0, 13, 15, 28, 57, 70, 111, 112, 134, 192, 200, 216, 230, 244},
  {7, 14, 22, 36, 51, 117, 132, 137, 146, 158, 162, 189, 195, 255},
  {33, 47, 82, 99, 101, 108, 116, 157, 161, 169, 179, 187, 210, 220},
  {12, 14, 37, 53, 59, 77, 92, 93, 104, 154, 166, 224, 235, 237},
  {32, 42, 50, 56, 84, 90, 94, 149, 174, 176, 178, 187, 215, 248},
  {19, 22, 52, 58, 95, 109, 121, 157, 187, 198, 207, 222, 227, 238},
  {2, 25, 62, 120, 134, 135, 170, 186, 216, 220, 225, 240, 243, 253},
  {8, 42, 56, 59, 71, 127, 130, 139, 145, 149, 167, 207, 209, 220},
  {3, 25, 27, 28, 29, 82, 111, 116, 132, 156, 168, 172, 209, 228},
  {0, 27, 44, 46, 68, 102, 120, 131, 139, 142, 171, 172, 194, 196},
  {14, 72, 77, 79, 120, 121, 126, 131, 140, 172, 225, 227, 240, 245},
  {2, 25, 38, 63, 71, 102, 129, 150, 187, 188, 204, 235, 237, 250},
  {12, 63, 69, 92, 109, 111, 148, 157, 177, 191, 201, 203, 208, 227},
  {7, 15, 56, 89, 102, 103, 109, 147, 160, 172, 212, 236, 241, 245},
  {11, 34, 42, 52, 57, 72, 144, 150, 154, 157, 167, 224, 228, 249},
  {19, 44, 62, 65, 71, 82, 102, 106, 110, 127, 167, 178, 180, 196},
  {5, 8, 15, 39, 45, 62, 113, 125, 147, 158, 172, 193, 217, 237},
  {21, 60, 105, 107, 117, 135, 136, 138, 151, 163, 165, 170, 201, 230},
  {19, 30, 37, 76, 86, 106, 123, 127, 133, 134, 151, 194, 199, 223},
  {10, 16, 45, 93, 94, 100, 112, 124, 155, 163, 165, 179, 182, 230},
  {36, 48, 60, 108, 156, 162, 168, 169, 172, 177, 210, 220, 225, 237},
  {27, 43, 60, 95, 96, 104, 106, 186, 189, 196, 240, 241, 245, 255},
  {14, 56, 66, 78, 82, 96, 100, 132, 140, 143, 152, 176, 193, 252},
  {8, 36, 39, 40, 66, 76, 84, 93, 97, 106, 138, 141, 169, 235},
  {2, 30, 70, 84, 113, 120, 141, 151, 153, 159, 161, 197, 212, 218},
  {36, 50, 69, 74, 89, 96, 108, 109, 125, 168, 185, 233, 249, 251},
  {8, 12, 79, 81, 98, 105, 127, 133, 144, 182, 193, 198, 210, 244},
  {21, 43, 49, 68, 87, 127, 138, 158, 163, 165, 169, 215, 221, 251},
  {6, 22, 54, 70, 101, 111, 119, 168, 177, 214, 217, 227, 232, 234},
  {4, 13, 16, 24, 26, 32, 57, 90, 122, 126, 146, 220, 236, 237},
  {33, 39, 73, 74, 88, 109, 118, 192, 194, 208, 226, 236, 250, 252},
  {8, 20, 32, 58, 74, 83, 91, 97, 151, 159, 186, 241, 242, 254},
  {6, 22, 44, 45, 69, 82, 101, 107, 110, 111, 146, 195, 240, 254},
  {12, 27, 47, 48, 68, 83, 112, 128, 171, 204, 208, 222, 233, 248},
  {9, 58, 65, 84, 87, 105, 119, 125, 177, 184, 199, 214, 226, 254},
  {10, 11, 31, 45, 73, 81, 88, 102, 107, 184, 192, 216, 217, 236},
  {18, 52, 62, 63, 84, 154, 167, 208, 220, 230, 235, 236, 240, 246},
  {0, 1, 14, 47, 48, 74, 135, 170, 211, 222, 223, 234, 242, 249},
  {55, 74, 86, 103, 115, 143, 157, 168, 180, 181, 191, 197, 238, 254},
  {20, 34, 73, 75, 120, 127, 140, 157, 164, 173, 205, 235, 244, 245},
  {8, 16, 18, 24, 62, 67, 70, 78, 101, 109, 160, 162, 170, 251},
  {43, 73, 133, 136, 137, 149, 151, 155, 171, 172, 214, 221, 223, 243},
  {8, 38, 54, 64, 84, 95, 121, 162, 163, 166, 195, 196, 205, 225},
  {7, 12, 13, 17, 54, 86, 112, 145, 150, 174, 188, 198, 226, 252},
  {4, 27, 40, 41, 62, 101, 119, 159, 165, 173, 182, 186, 193, 245},
  {15, 20, 23, 49, 71, 99, 135, 153, 180, 182, 193, 218, 221, 225},
  {8, 14, 29, 30, 72, 85, 117, 180, 183, 188, 222, 227, 238, 240},
  {8, 31, 38, 43, 85, 98, 114, 126, 160, 191, 210, 212, 228, 231},
  {6, 17, 21, 53, 70, 81, 90, 132, 133, 188, 207, 229, 230, 252},
  {35, 57, 62, 80, 118, 126, 164, 192, 198, 225, 226, 230, 231, 245},
  {75, 86, 119, 128, 144, 158, 161, 169, 188, 208, 228, 232, 233, 242},
  {0, 35, 75, 86, 87, 91, 112, 163, 203, 215, 221, 227, 229, 234},
  {5, 28, 68, 70, 95, 102, 108, 111, 126, 138, 145, 202, 217, 223},
  {10, 17, 28, 46, 50, 59, 73, 83, 102, 103, 146, 174, 200, 236},
  {15, 24, 32, 41, 43, 55, 56, 106, 129, 132, 190, 210, 217, 253},
  {4, 32, 43, 44, 56, 68, 81, 94, 123, 146, 193, 226, 237, 238},
  {70, 78, 82, 87, 114, 119, 149, 151, 193, 209, 217, 218, 249, 252},
  {3, 25, 39, 43, 101, 105, 113, 134, 151, 156, 175, 176, 177, 216},
  {20, 27, 119, 123, 147, 149, 157, 161, 209, 215, 222, 224, 232, 251},
  {0, 13, 54, 79, 81, 98, 114, 154, 175, 209, 232, 241, 249, 254},
  {1, 3, 6, 15, 34, 38, 45, 74, 98, 120, 197, 199, 224, 248},
  {3, 14, 51, 74, 83, 89, 111, 143, 177, 183, 202, 225, 240, 254},
  {7, 11, 21, 32, 52, 74, 95, 110, 143, 159, 175, 189, 193, 236},
  {7, 38, 55, 59, 61, 108, 112, 115, 120, 181, 194, 201, 211, 222},
  {8, 10, 19, 20, 57, 73, 108, 122, 147, 163, 173, 202, 212, 236},
  {1, 6, 9, 34, 45, 54, 64, 94, 98, 107, 128, 219, 235, 247},
  {1, 4, 17, 33, 44, 55, 61, 85, 97, 170, 180, 207, 212, 224},
  {31, 33, 114, 118, 130, 133, 153, 154, 193, 204, 221, 223, 230, 251},
  {41, 95, 104, 118, 149, 152, 157, 162, 190, 198, 211, 219, 231, 249},
  {5, 22, 43, 98, 108, 123, 136, 178, 198, 199, 210, 216, 225, 251},
  {6, 36, 50, 87, 107, 110, 111, 157, 168, 171, 188, 193, 195, 218},
  {10, 11, 22, 31, 36, 73, 96, 112, 127, 134, 195, 233, 236, 243},
  {7, 17, 22, 47, 63, 68, 82, 110, 175, 185, 186, 187, 208, 220},
  {7, 26, 41, 65, 67, 87, 115, 127, 138, 164, 194, 209, 211, 255},
  {6, 29, 32, 51, 58, 79, 116, 120, 151, 155, 163, 215, 234, 254},
  {20, 30, 44, 59, 120, 145, 146, 148, 165, 167, 169, 195, 222, 228},
  {1, 12, 14, 42, 51, 63, 89, 132, 143, 166, 177, 181, 222, 238},
  {20, 30, 34, 41, 56, 82, 96, 114, 131, 134, 143, 223, 227, 230},
  {6, 20, 59, 91, 111, 114, 149, 168, 200, 215, 218, 231, 240, 251},
  {3, 26, 100, 119, 123, 138, 141, 150, 159, 186, 197, 210, 211, 255},
  {0, 25, 41, 58, 64, 83, 151, 156, 172, 176, 207, 211, 220, 234},
  {12, 40, 45, 55, 60, 63, 93, 106, 107, 124, 132, 183, 192, 199},
  {14, 16, 86, 110, 131, 141, 149, 157, 182, 198, 200, 212, 245, 248},
  {8, 10, 11, 20, 25, 80, 81, 96, 121, 138, 146, 175, 200, 221},
  {20, 73, 110, 123, 141, 166, 170, 173, 187, 190, 191, 203, 205, 248},
  {10, 28, 29, 43, 51, 55, 122, 126, 152, 155, 158, 171, 176, 220},
  {16, 24, 30, 41, 45, 65, 69, 85, 125, 133, 138, 145, 161, 191},
  {2, 5, 6, 25, 39, 82, 87, 125, 135, 141, 190, 191, 210, 232},
  {23, 24, 25, 28, 50, 73, 76, 88, 102, 121, 194, 200, 203, 254},
  {5, 25, 59, 64, 118, 155, 157, 164, 204, 206, 213, 222, 235, 253},
  {10, 11, 17, 35, 57, 73, 99, 106, 128, 137, 171, 218, 227, 255},
  {21, 26, 39, 57, 60, 62, 98, 113, 173, 197, 222, 236, 250, 253},
  {31, 42, 47, 56, 65, 68, 70, 71, 86, 142, 160, 173, 213, 250},
  {47, 50, 86, 95, 114, 173, 176, 197, 206, 216, 221, 223, 235, 236},
  {15, 31, 52, 59, 93, 101, 133, 139, 154, 173, 177, 189, 193, 204},
  {11, 22, 26, 36, 53, 67, 117, 134, 174, 187, 198, 206, 209, 226},
  {13, 37, 69, 94, 123, 134, 150, 161, 188, 194, 203, 222, 228, 231},
  {1, 2, 43, 63, 83, 113, 118, 132, 135, 164, 169, 211, 225, 245},
  {10, 63, 66, 72, 76, 79, 90, 104, 116, 129, 155, 156, 168, 245},
  {9, 29, 55, 74, 82, 98, 106, 116, 118, 172, 210, 224, 228, 241},
  {68, 78, 101, 133, 147, 154, 161, 176, 179, 192, 202, 205, 221, 240},
  {2, 14, 38, 41, 53, 81, 100, 124, 137, 165, 166, 183, 207, 246},
  {16, 19, 62, 90, 93, 97, 115, 122, 140, 192, 193, 211, 223, 227},
  {1, 12, 47, 49, 105, 114, 118, 132, 152, 161, 169, 219, 249, 254},
  {9, 12, 35, 53, 64, 95, 117, 123, 132, 134, 139, 141, 184, 233},
  {6, 10, 18, 39, 62, 79, 161, 162, 164, 177, 183, 220, 225, 229},
  {12, 27, 39, 46, 68, 73, 77, 80, 124, 128, 148, 196, 198, 208},
  {49, 50, 64, 82, 114, 151, 177, 178, 189, 205, 222, 237, 244, 252},
  {14, 20, 27, 50, 83, 98, 100, 103, 145, 182, 183, 195, 213, 218},
  {2, 18, 32, 72, 86, 103, 114, 132, 151, 164, 188, 200, 203, 234},
  {1, 35, 39, 65, 66, 100, 101, 111, 118, 133, 171, 218, 226, 241},
  {11, 67, 72, 81, 107, 112, 121, 132, 141, 143, 211, 214, 242, 255},
  {38, 56, 65, 75, 76, 93, 116, 123, 130, 131, 138, 170, 176, 224},
  {35, 47, 54, 56, 74, 79, 125, 134, 141, 192, 197, 225, 239, 247},
  {0, 26, 41, 42, 53, 73, 81, 110, 140, 148, 198, 201, 210, 220},
  {2, 21, 23, 37, 97, 105, 135, 148, 151, 176, 208, 217, 219, 246} }, 
{ {16, 23, 51, 52, 63, 75, 93, 131, 167, 188, 198, 202, 250, 255},
{16, 27, 33, 39, 82, 90, 99, 117, 128, 166, 191, 208, 227, 243},
{7, 32, 50, 60, 78, 89, 110, 133, 167, 192, 195, 216, 228, 244},
{6, 32, 33, 36, 80, 90, 104, 110, 114, 135, 136, 139, 175, 227},
{0, 13, 15, 28, 57, 70, 111, 112, 134, 192, 200, 216, 230, 244},
{7, 14, 22, 36, 51, 117, 132, 137, 146, 158, 162, 189, 195, 255},
{33, 47, 82, 99, 101, 108, 116, 157, 161, 169, 179, 187, 210, 220},
{12, 14, 37, 53, 59, 77, 92, 93, 104, 154, 166, 224, 235, 237},
{32, 42, 50, 56, 84, 90, 94, 149, 174, 176, 178, 187, 215, 248},
{19, 22, 52, 58, 95, 109, 121, 157, 187, 198, 207, 222, 227, 238},
{2, 25, 62, 120, 134, 135, 170, 186, 216, 220, 225, 240, 243, 253},
{8, 42, 56, 59, 71, 127, 130, 139, 145, 149, 167, 207, 209, 220},
{3, 25, 27, 28, 29, 82, 111, 116, 132, 156, 168, 172, 209, 228},
{0, 27, 44, 46, 68, 102, 120, 131, 139, 142, 171, 172, 194, 196},
{14, 72, 77, 79, 120, 121, 126, 131, 140, 172, 225, 227, 240, 245},
{2, 25, 38, 63, 71, 102, 129, 150, 187, 188, 204, 235, 237, 250},
{12, 63, 69, 92, 109, 111, 148, 157, 177, 191, 201, 203, 208, 227},
{7, 15, 56, 89, 102, 103, 109, 147, 160, 172, 212, 236, 241, 245},
{11, 34, 42, 52, 57, 72, 144, 150, 154, 157, 167, 224, 228, 249},
{19, 44, 62, 65, 71, 82, 102, 106, 110, 127, 167, 178, 180, 196},
{5, 8, 15, 39, 45, 62, 113, 125, 147, 158, 172, 193, 217, 237},
{21, 60, 105, 107, 117, 135, 136, 138, 151, 163, 165, 170, 201, 230},
{19, 30, 37, 76, 86, 106, 123, 127, 133, 134, 151, 194, 199, 223},
{10, 16, 45, 93, 94, 100, 112, 124, 155, 163, 165, 179, 182, 230},
{36, 48, 60, 108, 156, 162, 168, 169, 172, 177, 210, 220, 225, 237},
{27, 43, 60, 95, 96, 104, 106, 186, 189, 196, 240, 241, 245, 255},
{14, 56, 66, 78, 82, 96, 100, 132, 140, 143, 152, 176, 193, 252},
{8, 36, 39, 40, 66, 76, 84, 93, 97, 106, 138, 141, 169, 235},
{2, 30, 70, 84, 113, 120, 141, 151, 153, 159, 161, 197, 212, 218},
{36, 50, 69, 74, 89, 96, 108, 109, 125, 168, 185, 233, 249, 251},
{8, 12, 79, 81, 98, 105, 127, 133, 144, 182, 193, 198, 210, 244},
{21, 43, 49, 68, 87, 127, 138, 158, 163, 165, 169, 215, 221, 251},
{6, 22, 54, 70, 101, 111, 119, 168, 177, 214, 217, 227, 232, 234},
{4, 13, 16, 24, 26, 32, 57, 90, 122, 126, 146, 220, 236, 237},
{33, 39, 73, 74, 88, 109, 118, 192, 194, 208, 226, 236, 250, 252},
{8, 20, 32, 58, 74, 83, 91, 97, 151, 159, 186, 241, 242, 254},
{6, 22, 44, 45, 69, 82, 101, 107, 110, 111, 146, 195, 240, 254},
{12, 27, 47, 48, 68, 83, 112, 128, 171, 204, 208, 222, 233, 248},
{9, 58, 65, 84, 87, 105, 119, 125, 177, 184, 199, 214, 226, 254},
{10, 11, 31, 45, 73, 81, 88, 102, 107, 184, 192, 216, 217, 236},
{18, 52, 62, 63, 84, 154, 167, 208, 220, 230, 235, 236, 240, 246},
{0, 1, 14, 47, 48, 74, 135, 170, 211, 222, 223, 234, 242, 249},
{55, 74, 86, 103, 115, 143, 157, 168, 180, 181, 191, 197, 238, 254},
{20, 34, 73, 75, 120, 127, 140, 157, 164, 173, 205, 235, 244, 245},
{8, 16, 18, 24, 62, 67, 70, 78, 101, 109, 160, 162, 170, 251},
{43, 73, 133, 136, 137, 149, 151, 155, 171, 172, 214, 221, 223, 243},
{8, 38, 54, 64, 84, 95, 121, 162, 163, 166, 195, 196, 205, 225},
{7, 12, 13, 17, 54, 86, 112, 145, 150, 174, 188, 198, 226, 252},
{4, 27, 40, 41, 62, 101, 119, 159, 165, 173, 182, 186, 193, 245},
{15, 20, 23, 49, 71, 99, 135, 153, 180, 182, 193, 218, 221, 225},
{8, 14, 29, 30, 72, 85, 117, 180, 183, 188, 222, 227, 238, 240},
{8, 31, 38, 43, 85, 98, 114, 126, 160, 191, 210, 212, 228, 231},
{6, 17, 21, 53, 70, 81, 90, 132, 133, 188, 207, 229, 230, 252},
{35, 57, 62, 80, 118, 126, 164, 192, 198, 225, 226, 230, 231, 245},
{75, 86, 119, 128, 144, 158, 161, 169, 188, 208, 228, 232, 233, 242},
{0, 35, 75, 86, 87, 91, 112, 163, 203, 215, 221, 227, 229, 234},
{5, 28, 68, 70, 95, 102, 108, 111, 126, 138, 145, 202, 217, 223},
{10, 17, 28, 46, 50, 59, 73, 83, 102, 103, 146, 174, 200, 236},
{15, 24, 32, 41, 43, 55, 56, 106, 129, 132, 190, 210, 217, 253},
{4, 32, 43, 44, 56, 68, 81, 94, 123, 146, 193, 226, 237, 238},
{70, 78, 82, 87, 114, 119, 149, 151, 193, 209, 217, 218, 249, 252},
{3, 25, 39, 43, 101, 105, 113, 134, 151, 156, 175, 176, 177, 216},
{20, 27, 119, 123, 147, 149, 157, 161, 209, 215, 222, 224, 232, 251},
{0, 13, 54, 79, 81, 98, 114, 154, 175, 209, 232, 241, 249, 254},
{1, 3, 6, 15, 34, 38, 45, 74, 98, 120, 197, 199, 224, 248},
{3, 14, 51, 74, 83, 89, 111, 143, 177, 183, 202, 225, 240, 254},
{7, 11, 21, 32, 52, 74, 95, 110, 143, 159, 175, 189, 193, 236},
{7, 38, 55, 59, 61, 108, 112, 115, 120, 181, 194, 201, 211, 222},
{8, 10, 19, 20, 57, 73, 108, 122, 147, 163, 173, 202, 212, 236},
{1, 6, 9, 34, 45, 54, 64, 94, 98, 107, 128, 219, 235, 247},
{1, 4, 17, 33, 44, 55, 61, 85, 97, 170, 180, 207, 212, 224},
{31, 33, 114, 118, 130, 133, 153, 154, 193, 204, 221, 223, 230, 251},
{41, 95, 104, 118, 149, 152, 157, 162, 190, 198, 211, 219, 231, 249},
{5, 22, 43, 98, 108, 123, 136, 178, 198, 199, 210, 216, 225, 251},
{6, 36, 50, 87, 107, 110, 111, 157, 168, 171, 188, 193, 195, 218},
{10, 11, 22, 31, 36, 73, 96, 112, 127, 134, 195, 233, 236, 243},
{7, 17, 22, 47, 63, 68, 82, 110, 175, 185, 186, 187, 208, 220},
{7, 26, 41, 65, 67, 87, 115, 127, 138, 164, 194, 209, 211, 255},
{6, 29, 32, 51, 58, 79, 116, 120, 151, 155, 163, 215, 234, 254},
{20, 30, 44, 59, 120, 145, 146, 148, 165, 167, 169, 195, 222, 228},
{1, 12, 14, 42, 51, 63, 89, 132, 143, 166, 177, 181, 222, 238},
{20, 30, 34, 41, 56, 82, 96, 114, 131, 134, 143, 223, 227, 230},
{6, 20, 59, 91, 111, 114, 149, 168, 200, 215, 218, 231, 240, 251},
{3, 26, 100, 119, 123, 138, 141, 150, 159, 186, 197, 210, 211, 255},
{0, 25, 41, 58, 64, 83, 151, 156, 172, 176, 207, 211, 220, 234},
{12, 40, 45, 55, 60, 63, 93, 106, 107, 124, 132, 183, 192, 199},
{14, 16, 86, 110, 131, 141, 149, 157, 182, 198, 200, 212, 245, 248},
{8, 10, 11, 20, 25, 80, 81, 96, 121, 138, 146, 175, 200, 221},
{20, 73, 110, 123, 141, 166, 170, 173, 187, 190, 191, 203, 205, 248},
{10, 28, 29, 43, 51, 55, 122, 126, 152, 155, 158, 171, 176, 220},
{16, 24, 30, 41, 45, 65, 69, 85, 125, 133, 138, 145, 161, 191},
{2, 5, 6, 25, 39, 82, 87, 125, 135, 141, 190, 191, 210, 232},
{23, 24, 25, 28, 50, 73, 76, 88, 102, 121, 194, 200, 203, 254},
{5, 25, 59, 64, 118, 155, 157, 164, 204, 206, 213, 222, 235, 253},
{10, 11, 17, 35, 57, 73, 99, 106, 128, 137, 171, 218, 227, 255},
{21, 26, 39, 57, 60, 62, 98, 113, 173, 197, 222, 236, 250, 253},
{31, 42, 47, 56, 65, 68, 70, 71, 86, 142, 160, 173, 213, 250},
{47, 50, 86, 95, 114, 173, 176, 197, 206, 216, 221, 223, 235, 236},
{15, 31, 52, 59, 93, 101, 133, 139, 154, 173, 177, 189, 193, 204},
{11, 22, 26, 36, 53, 67, 117, 134, 174, 187, 198, 206, 209, 226},
{13, 37, 69, 94, 123, 134, 150, 161, 188, 194, 203, 222, 228, 231},
{1, 2, 43, 63, 83, 113, 118, 132, 135, 164, 169, 211, 225, 245},
{10, 63, 66, 72, 76, 79, 90, 104, 116, 129, 155, 156, 168, 245},
{9, 29, 55, 74, 82, 98, 106, 116, 118, 172, 210, 224, 228, 241},
{68, 78, 101, 133, 147, 154, 161, 176, 179, 192, 202, 205, 221, 240},
{2, 14, 38, 41, 53, 81, 100, 124, 137, 165, 166, 183, 207, 246},
{16, 19, 62, 90, 93, 97, 115, 122, 140, 192, 193, 211, 223, 227},
{1, 12, 47, 49, 105, 114, 118, 132, 152, 161, 169, 219, 249, 254},
{9, 12, 35, 53, 64, 95, 117, 123, 132, 134, 139, 141, 184, 233},
{6, 10, 18, 39, 62, 79, 161, 162, 164, 177, 183, 220, 225, 229},
{12, 27, 39, 46, 68, 73, 77, 80, 124, 128, 148, 196, 198, 208},
{49, 50, 64, 82, 114, 151, 177, 178, 189, 205, 222, 237, 244, 252},
{14, 20, 27, 50, 83, 98, 100, 103, 145, 182, 183, 195, 213, 218},
{2, 18, 32, 72, 86, 103, 114, 132, 151, 164, 188, 200, 203, 234},
{1, 35, 39, 65, 66, 100, 101, 111, 118, 133, 171, 218, 226, 241},
{11, 67, 72, 81, 107, 112, 121, 132, 141, 143, 211, 214, 242, 255},
{38, 56, 65, 75, 76, 93, 116, 123, 130, 131, 138, 170, 176, 224},
{35, 47, 54, 56, 74, 79, 125, 134, 141, 192, 197, 225, 239, 247},
{0, 26, 41, 42, 53, 73, 81, 110, 140, 148, 198, 201, 210, 220},
{2, 21, 23, 37, 97, 105, 135, 148, 151, 176, 208, 217, 219, 246} } };

Adafruit_NeoPixel pixels = Adafruit_NeoPixel(TRUEPIXELS, PIN, NEO_GRB + NEO_KHZ800);


void setup() {
  pixels.begin();
  
  Serial.begin(9600);

  unsigned long test = 1234;
  unsigned long x =test/3;
  Serial.println(x);

  int i = 0;
  while (i < TRUEPIXELS) {
    pixels.setPixelColor(i, pixels.Color(120,120,0));
    i++;
  }
  pixels.show();

  delay(500);
  pinMode(readPin, INPUT);
  delay(10000);

  i = 0;
  while (i < TRUEPIXELS) {
    pixels.setPixelColor(i, pixels.Color(0,0,0));
    i++;
  }
  pixels.show();
  
  average = averageSpin();
  Serial.println(average);
}

unsigned long averageSpin(){

  
  int i = 0;
  unsigned long lastTime = millis();
  unsigned long currentTime;
  while( i < 40 ){
    while ( abs( analogRead(readPin) - standard ) <= tolerance ) {
      delay(1);
    }
    currentTime = millis();
    totalTime += currentTime - lastTime;
    lastTime = currentTime;
    delay(25);
    i++;
  }

  unsigned long average = totalTime / 40;
  return average;
}

void loop() {

  currentTime = millis();
  while ( abs( analogRead(readPin) - standard ) <= tolerance ) {
    delayMicroseconds(100);
  }

  unsigned long CurrentTime = millis();
  
  for (int arg = 0; arg < 120; arg++) {
    
    for (int mod = 0; mod < NUMPIXELS; mod++) {
      pixels.setPixelColor( mod, pixels.Color( pgm_read_byte(&(image[arg, mod, 0])), pgm_read_byte(&(image[arg, mod, 1])), pgm_read_byte(&(image[arg, mod, 2])) ) );
    }
    while ( millis() - currentTime < arg*average/120){
      delayMicroseconds(100);
    }
    pixels.show();
  }

  //Show Blue segment
  for (int i = 0; i < NUMPIXELS; i++){
    pixels.setPixelColor(i, pixels.Color( 0, 0, 255));
  }

  while( millis() < CurrentTime + (2*average)/3 ){
    delayMicroseconds(100);
  }
  pixels.show();


}
